(this["webpackJsonpzh-TW.2021.plastics.plastic_policy.signup"]=this["webpackJsonpzh-TW.2021.plastics.plastic_policy.signup"]||[]).push([[0],{17:function(e,o,t){"use strict";t.r(o);t(7),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=t(2),n=t.n(a),i=t(5),r=(t(9),t(10)),s=t(11),c=window,l=c.$,p=(c.dataLayer,c.currency),d=t(16),m="https://www.greenpeace.org/taiwan/?ref=2021-plastic_policy_petition",u="https://supporter.ea.greenpeace.org/tw/s/donate?campaign=plastics&ref=2021-plastic_policy_petition-footer",h="https://www.greenpeace.org/taiwan/policies/privacy-and-cookies/?ref=2021-plastic_policy_petition";function f(){return(f=Object(i.a)(n.a.mark((function e(){var o,t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=parseInt(l('#mc-form [name="numResponses"]').val()),console.log(o),t=5e3*Math.ceil(o/5e3),console.log(t),l("#petition-goal").html(p(t,{precision:0,separator:","}).format()),l("#petition-count").html(p(o,{precision:0,separator:","}).format()),a=o/t,new s.Line("#progress-bar",{strokeWidth:3,easing:"easeInOut",duration:1400,color:"#FFEA82",trailColor:"#eee",trailWidth:1,svgStyle:{width:"100%",height:"100%"}}).animate(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.directTo=function(e){switch(e){case"main":window.open(m,"_blank");break;case"donate":window.open(u,"_blank");break;case"privacy":window.open(h,"_blank");break;default:window.open(h,"_blank")}},l(document).ready((function(){console.log("ready!"),function(){f.apply(this,arguments)}(),function(){var e=(new Date).getFullYear();l("#fake_supporter_birthYear").append('<option value="">\u51fa\u751f\u5e74\u4efd</option>');for(var o=0;o<80;o++){var t='<option value="01/01/'.concat(e-o,'">').concat(e-o,"</option>");l("#fake_supporter_birthYear").append(t),l("#en__field_supporter_NOT_TAGGED_6").append(t)}}(),g(),function(){var e=["me.com","outlook.com","netvigator.com","cloud.com","live.hk","msn.com","gmail.com","hotmail.com","ymail.com","yahoo.com","yahoo.com.tw","yahoo.com.hk"],o=["com","net","org"];l("#fake_supporter_emailAddress").on("blur",(function(){console.log(l("#fake_supporter_emailAddress").val()),d.run({email:l("#fake_supporter_emailAddress").val(),domains:e,topLevelDomains:o,suggested:function(e){l(".email-suggestion").remove(),l('<div class="email-suggestion">\u60a8\u60f3\u8f38\u5165\u7684\u662f <strong id="emailSuggestion">'.concat(e.full,"</strong> \u55ce\uff1f</div>")).insertAfter("#fake_supporter_emailAddress"),l(".email-suggestion").click((function(){l("#fake_supporter_emailAddress").val(l("#emailSuggestion").html()),l(".email-suggestion").remove()}))},empty:function(){}})}))}(),function(){console.log(window.location.search);var e=new URLSearchParams(window.location.search);if("dd"===e.get("utm_source"))switch(l(".donate-btn").hide(),l(".share-section").removeClass("col-md-4"),l(".share-section").removeClass("col-sm-6"),l(".share-section").addClass("col-md-8"),l(".share-section").addClass("col-sm-12"),l(".slider-typography").css("position","relative"),l(".slider-typography").css("padding-top","15%"),l(".line-share-img").hide(),e.get("utm_content")){case"tp":l(".line-link").attr("href","http://act.gp/GPLINE_tp"),l(".tp-line").show();break;case"tc":l(".tc-line").show(),l(".line-link").attr("href","http://act.gp/GPLINE_tc");break;case"ks":l(".ks-line").show(),l(".line-link").attr("href","http://act.gp/GPLINE_ks");break;default:l(".tp-line").show(),l(".line-link").attr("href","http://act.gp/GPLINE_tp")}else l(".line-share-section").hide();var o=function(){var e="FRESH";e=2===window.pageJson.pageNumber?"SUCC":"FRESH";return e}();"FRESH"===o?l(".page-2").hide():"SUCC"===o&&(l(".page-1").hide(),l(".page-2").show(),l("section").hide(),l("#home").show());l(".loading-cover").fadeOut(),l(window).scroll((function(){l(this).scrollTop()>100&&l(this).scrollTop()<l("#speakers").offset().top?l(".parallax-bg").show():l(".parallax-bg").hide()}))}()}));var g=function(){console.log("init form"),l("#center_sign-submit").click((function(e){e.preventDefault(),l("#fake-form").submit(),console.log("fake-form submitting")})).end(),l.validator.addMethod("email",(function(e,o){return this.optional(o)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/i.test(e)}),"Email \u683c\u5f0f\u932f\u8aa4"),l.validator.addMethod("taiwan-phone",(function(e,o){var t=new RegExp(/^(0|886|\+886)?(9\d{8})$/).test(e),a=new RegExp(/^(0|886|\+886){1}[2-8]-?\d{6,8}$/).test(e);return l("#fake_supporter_phone").val()?t||a:(console.log("phone testing"),!0)}),"\u96fb\u8a71\u683c\u5f0f\u4e0d\u6b63\u78ba\uff0c\u8acb\u53ea\u8f38\u5165\u6578\u5b57 0912345678 \u548c 02-23612351"),l.validator.addClassRules({email:{email:!0},"taiwan-phone":{"taiwan-phone":!0}}),l("#fake-form").validate({errorPlacement:function(e,o){console.log(e),o.parents("div.form-field:first").after(e)},submitHandler:function(e){var o=this;l('#mc-form [name="Email"]').val(l("#fake_supporter_emailAddress").val()),l('#mc-form [name="LastName"]').val(l("#fake_supporter_lastName").val()),l('#mc-form [name="FirstName"]').val(l("#fake_supporter_firstName").val()),l('#mc-form [name="MobilePhone"]').val(l("#fake_supporter_phone").val()),l('#mc-form [name="OptIn"]').val(l("#fake_optin").prop("checked")),l('#mc-form [name="Birthdate"]').val(r(l("#fake_supporter_birthYear").val()).format("YYYY-MM-DD"));var t=new FormData;return Object.keys(l("#mc-form input")).forEach((function(e){var o=l("#mc-form input")[e],a=null;a="checkbox"===o.type?l("#fake_optin").prop("checked"):o.value,t.append(o.name,a)})),l(".loading-cover").fadeIn(),fetch(l("#mc-form").attr("action"),{method:"POST",body:t}).then((function(e){if(l(".loading-cover").fadeOut(),e.ok)return e.json();throw{ok:e.ok,status:e.status,statusText:e.statusText,type:e.type}})).then((function(e){var o,t;e&&(console.log("mc form posted"),console.log("response",e),window.pageJson.pageNumber=2,l(".page-1").hide(),l(".page-2").show(),m+="_tkpage",u+="_tkpage",h+="_tkpage",o="2021-plastic_policy",window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"gaEvent",eventCategory:"petitions",eventAction:"signup",eventLabel:o,eventValue:t}),window.dataLayer.push({event:"fbqEvent",contentName:o,contentCategory:"Petition Signup"}),window.uetq=window.uetq||[],window.uetq.push("event","signup",{event_category:"petitions",event_label:o,event_value:0}))})).catch((function(e){console.log(e),o.formLoading=!1}))},invalidHandler:function(e,o){var t=o.numberOfInvalids();if(t){console.log(t);l("div.error").show()}else l("div.error").hide()}})};"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,o,t){e.exports=t(17)},7:function(e,o,t){},9:function(e,o,t){}},[[6,1,2]]]);
//# sourceMappingURL=main.de07d06a.chunk.js.map